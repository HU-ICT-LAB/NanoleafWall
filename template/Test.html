<!doctype html>
<html>

<head>
   <title>Nano Templates</title>
</head>

<style type="text/css">
   td {
      padding: 8px 8px;
      border: 1px solid black;
   }

   .nanoleafs1 {
      background-color: white;
   }

   .nanoleafs2 {
      background-color: green;
   }
</style>

<body>

   <button type="button" onclick="loadgame()">Play Wack a mole</button>
<<<<<<< HEAD

   <table style="margin-left: 20px;">

      {%for mainIndex in range(0,len)%}
      {%for sideIndex in Numbers%}
      <td class="nanoleafs1" id="{{sideIndex[mainIndex]}}">{{sideIndex[mainIndex]}}</td>
      {%endfor%}
=======
  
   <table style="margin-left: 20px;">

      {%for mainIndex in range(0,len)%}
         {%for sideIndex in Numbers%}
         <td class="nanoleafs1" id="{{sideIndex[mainIndex]}}">{{sideIndex[mainIndex]}}</td>
         {%endfor%}
>>>>>>> 9fcfdd33f0165fd9c1699ccb25174b942786e68f
      </tr>
      {%endfor%}

   </table>

   <script>
<<<<<<< HEAD
      var holes = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17",
         "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34",
         "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51",
         "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68",
         "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "100", "101", "102"];
      let lastHole;
      let timeUp = false;
      let score = 0;


      // var elm = '';
      // console.log(randomHole(holes));
      console.log(randomHole(holes));
      function randomTime(min, max) {
         const time = Math.round(Math.random() * (max - min) + min);
         return time;
      }


      function randomHole(holes) {
         const randNum = Math.floor(Math.random() * holes.length);
         const hole = holes[randNum];

         if (lastHole === hole) return randomHole(holes);

         lastHole = hole;
         return hole;
      }

      function popUp() {
         const time = randomTime(200, 1000);
         const hole = document.getElementById(randomHole(holes));
         hole.classList.add('nanoleafs2');

         setTimeout(() => {
            hole.classList.remove('nanoleafs2');
            if (!timeUp) popUp();
         }, time);
      }

      function loadgame() {
         timeUp = false;
         popUp()
         setTimeout(() => timeUp = true, 10000);
         // var element = document.getElementById('{{j}}');
         // element.classList.add("nanoleafs2");
         // setTimeout(()=> {
         // element.classList.remove("nanoleafs2")
         // }, 3000);
=======

         function loadgame(){
         var elm = '{{j|tojson}}';
         console.log(elm);

         var element = document.getElementById('{{j}}');
         element.classList.add("nanoleafs2");
         setTimeout(()=> {
         element.classList.remove("nanoleafs2")
         }, 3000);
>>>>>>> 9fcfdd33f0165fd9c1699ccb25174b942786e68f


         var xhttp = new XMLHttpRequest();
         xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
<<<<<<< HEAD

=======
   
>>>>>>> 9fcfdd33f0165fd9c1699ccb25174b942786e68f
               document.getElementsByClassName("nanoleafs1").innerHTML = this.responseText;
            }
         };
         xhttp.open("GET", "Test_nenoleafs.py", true);
         xhttp.send();


         fetch(`${window.origin}/Wack_a_mol`, {
            method: "post",
            credentials: "include",
            body: JSON.stringify(loadgame),
            cache: "no-cache",
         })

            .then(function (response) {

               if (response.status !== 200) {
                  console.log(`Response status was not 200: ${response.status}`)
                  return;
               }

               response.json().then(function (data) {
                  console.log(data)
               })
            })
<<<<<<< HEAD

      }
=======
         }
      

>>>>>>> 9fcfdd33f0165fd9c1699ccb25174b942786e68f
   </script>


</body>

</html>